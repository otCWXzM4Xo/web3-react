"use strict";var n=require("@web3-react/abstract-connector");function t(){return(t=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n}).apply(this,arguments)}function e(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n,o(n,t)}function r(n){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function o(n,t){return(o=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function a(n,t,e){return(a=i()?Reflect.construct:function(n,t,e){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(n,r));return e&&o(i,e.prototype),i}).apply(null,arguments)}function c(n){var t="function"==typeof Map?new Map:void 0;return(c=function(n){if(null===n||-1===Function.toString.call(n).indexOf("[native code]"))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(n))return t.get(n);t.set(n,e)}function e(){return a(n,arguments,r(this).constructor)}return e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o(e,n)})(n)}function u(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function h(n,t){try{var e=n()}catch(n){return t(n)}return e&&e.then?e.then(void 0,t):e}function s(n){return n.hasOwnProperty("result")?n.result:n}require("tiny-warning"),"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var l=function(n){function t(){var t;return(t=n.call(this)||this).name=t.constructor.name,t.message="No Ethereum provider was found on window.klaytn.",t}return e(t,n),t}(c(Error)),d=function(n){function t(){var t;return(t=n.call(this)||this).name=t.constructor.name,t.message="The user rejected the request.",t}return e(t,n),t}(c(Error));exports.InjectedConnector=function(n){function r(t){var e;return(e=n.call(this,t)||this).handleNetworkChanged=e.handleNetworkChanged.bind(u(e)),e.handleChainChanged=e.handleChainChanged.bind(u(e)),e.handleAccountsChanged=e.handleAccountsChanged.bind(u(e)),e.handleClose=e.handleClose.bind(u(e)),e}e(r,n);var o=r.prototype;return o.handleChainChanged=function(n){this.emitUpdate({chainId:n,provider:window.klaytn})},o.handleAccountsChanged=function(n){0===n.length?this.emitDeactivate():this.emitUpdate({account:n[0]})},o.handleClose=function(n,t){this.emitDeactivate()},o.handleNetworkChanged=function(n){this.emitUpdate({chainId:n,provider:window.klaytn})},o.activate=function(){try{var n,e=function(e){function r(){return t({provider:window.klaytn},n?{account:n}:{})}var o=function(){if(!n)return Promise.resolve(window.klaytn.enable().then((function(n){return n&&s(n)[0]}))).then((function(t){n=t}))}();return o&&o.then?o.then(r):r()};if(!window.klaytn)throw new l;window.klaytn.on&&(window.klaytn.on("chainChanged",this.handleChainChanged),window.klaytn.on("accountsChanged",this.handleAccountsChanged),window.klaytn.on("close",this.handleClose),window.klaytn.on("networkChanged",this.handleNetworkChanged)),window.klaytn.isMetaMask&&(window.klaytn.autoRefreshOnNetworkChange=!1);var r=h((function(){return Promise.resolve(window.klaytn.send("eth_requestAccounts").then((function(n){return s(n)[0]}))).then((function(t){n=t}))}),(function(n){if(4001===n.code)throw new d}));return Promise.resolve(r&&r.then?r.then(e):e())}catch(n){return Promise.reject(n)}},o.getProvider=function(){try{return Promise.resolve(window.klaytn)}catch(n){return Promise.reject(n)}},o.getChainId=function(){try{var n,t=function(){function t(){if(!n)try{n=s(window.klaytn.send({method:"net_version"}))}catch(n){}return n||(n=window.klaytn.isDapper?s(window.klaytn.cachedResults.net_version):window.klaytn.chainId||window.klaytn.netVersion||window.klaytn.networkVersion||window.klaytn._chainId),n}var e=function(){if(!n){var t=h((function(){return Promise.resolve(window.klaytn.send("net_version").then(s)).then((function(t){n=t}))}),(function(){}));if(t&&t.then)return t.then((function(){}))}}();return e&&e.then?e.then(t):t()};if(!window.klaytn)throw new l;var e=h((function(){return Promise.resolve(window.klaytn.send("eth_chainId").then(s)).then((function(t){n=t}))}),(function(){}));return Promise.resolve(e&&e.then?e.then(t):t())}catch(n){return Promise.reject(n)}},o.getAccount=function(){try{var n,t=function(){function t(){return n||(n=s(window.klaytn.send({method:"eth_accounts"}))[0]),n}var e=function(){if(!n){var t=h((function(){return Promise.resolve(window.klaytn.enable().then((function(n){return s(n)[0]}))).then((function(t){n=t}))}),(function(){}));if(t&&t.then)return t.then((function(){}))}}();return e&&e.then?e.then(t):t()};if(!window.klaytn)throw new l;var e=h((function(){return Promise.resolve(window.klaytn.send("eth_accounts").then((function(n){return s(n)[0]}))).then((function(t){n=t}))}),(function(){}));return Promise.resolve(e&&e.then?e.then(t):t())}catch(n){return Promise.reject(n)}},o.deactivate=function(){window.klaytn&&window.klaytn.removeListener&&(window.klaytn.removeListener("chainChanged",this.handleChainChanged),window.klaytn.removeListener("accountsChanged",this.handleAccountsChanged),window.klaytn.removeListener("close",this.handleClose),window.klaytn.removeListener("networkChanged",this.handleNetworkChanged))},o.isAuthorized=function(){try{return window.klaytn?Promise.resolve(h((function(){return Promise.resolve(window.klaytn.send("eth_accounts").then((function(n){return s(n).length>0})))}),(function(){return!1}))):Promise.resolve(!1)}catch(n){return Promise.reject(n)}},r}(n.AbstractConnector),exports.NoEthereumProviderError=l,exports.UserRejectedRequestError=d;
//# sourceMappingURL=injected-connector.cjs.production.min.js.map
